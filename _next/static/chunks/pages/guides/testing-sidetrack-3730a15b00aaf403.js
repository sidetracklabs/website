(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{4823:function(s,e,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/testing-sidetrack",function(){return l(7880)}])},7880:function(s,e,l){"use strict";l.r(e),l.d(e,{__toc:function(){return a}});var n=l(1527),r=l(8407),c=l(4017),o=l(9170);l(1902);var i=l(3216);let a=[{depth:2,value:"Running a job",id:"running-a-job"},{depth:2,value:"Running jobs in a queue",id:"running-jobs-in-a-queue"},{depth:2,value:"Listing jobs",id:"listing-jobs"},{depth:2,value:"Listing job statuses",id:"listing-job-statuses"}];function t(s){let e=Object.assign({h1:"h1",p:"p",code:"code",ol:"ol",li:"li",h2:"h2",pre:"pre",div:"div",span:"span","data-lsp":"data-lsp"},(0,i.a)(),s.components),l=e["data-lsp"];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{children:"Testing Sidetrack"}),"\n",(0,n.jsxs)(e.p,{children:["Sidetrack provides multiple test utilities function under the ",(0,n.jsx)(e.code,{children:"SidetrackTest"})," class."]}),"\n",(0,n.jsxs)(e.p,{children:["The ",(0,n.jsx)(e.code,{children:"SidetrackTest"})," class extends all the functions under ",(0,n.jsx)(e.code,{children:"Sidetrack"}),", but also exposes these helpful utils:"]}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:"runJob"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:"runJobs"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:"listJobs"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:"listJobStatuses"})}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"Here's some common scenarios when testing your background jobs."}),"\n",(0,n.jsx)(e.h2,{id:"running-a-job",children:"Running a job"}),"\n",(0,n.jsxs)(e.p,{children:["In your tests, if you don't run ",(0,n.jsx)(e.code,{children:"sidetrack.start()"}),", then Sidetrack won't poll your database for new jobs.\nYou can manually run a job with the ",(0,n.jsx)(e.code,{children:"runJob"})," function."]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki dark-plus twoslash lsp",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"import"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(alias) class SidetrackTest<Queues extends SidetrackQueuesGenericType> import SidetrackTest",children:"SidetrackTest"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" } "}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"from"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"sidetrack"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:";"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"import"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(alias) const expect: ExpectStatic import expect",children:"expect"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"import it",children:"it"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" } "}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"from"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"vitest"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:";"})]}),(0,n.jsx)(e.div,{className:"line",children:"\xa0"}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"import it",children:"it"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"job runs"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"async"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" () "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#4FC1FF"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"new"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(alias) new SidetrackTest<{ userOnboarding: { email: string; }; }>(options: SidetrackOptions<{ userOnboarding: { email: string; }; }>): SidetrackTest<{ userOnboarding: { email: string; }; }> import SidetrackTest",children:"SidetrackTest"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"<{"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"    "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) userOnboarding: { email: string; }",children:"userOnboarding"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:": { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) email: string",children:"email"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:": "}),(0,n.jsx)(e.span,{style:{color:"#4EC9B0"},children:"string"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" };"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  }>({"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"    "}),(0,n.jsxs)(e.span,{style:{color:"#9CDCFE"},children:[(0,n.jsx)(l,{lsp:"(property) SidetrackOptions<{ userOnboarding: { email: string; }; }>.databaseOptions?: { connectionString: string; } | undefined",children:"databaseOptions"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"      "}),(0,n.jsxs)(e.span,{style:{color:"#9CDCFE"},children:[(0,n.jsx)(l,{lsp:"(property) connectionString: string",children:"connectionString"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"var process: NodeJS.Process",children:"process"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) NodeJS.Process.env: NodeJS.ProcessEnv",children:"env"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"["}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"DATABASE_URL"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"]!,"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"    },"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"    "}),(0,n.jsxs)(e.span,{style:{color:"#9CDCFE"},children:[(0,n.jsx)(l,{lsp:"(property) SidetrackOptions<{ userOnboarding: { email: string; }; }>.queues: SidetrackQueues<{ userOnboarding: { email: string; }; }>",children:"queues"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"      "}),(0,n.jsxs)(e.span,{style:{color:"#9CDCFE"},children:[(0,n.jsx)(l,{lsp:"(property) userOnboarding: { handler: (job: SidetrackJob<{ email: string; }>) => Promise<unknown>; options?: { maxAttempts?: number | undefined; } | undefined; }",children:"userOnboarding"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"        "}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(property) handler: (job: SidetrackJob<{ email: string; }>) => Promise<unknown>",children:"handler"})}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:":"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"async"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" ("}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(parameter) job: SidetrackJob<{ email: string; }>",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:") "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"          "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"namespace console var console: Console",children:"console"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(method) Console.log(message?: any, ...optionalParams: any[]): void (+1 overload)",children:"log"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"ran job"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"        },"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"      },"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"    },"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),(0,n.jsx)(e.div,{className:"line",children:"\xa0"}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#4FC1FF"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:'(method) Sidetrack<{ userOnboarding: { email: string; }; }>.insertJob<"userOnboarding">(queueName: "userOnboarding", payload: { email: string; }, options?: SidetrackInsertJobOptions | undefined): Promise<SidetrackJobs>',children:"insertJob"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"    "}),(0,n.jsxs)(e.span,{style:{color:"#9CDCFE"},children:[(0,n.jsx)(l,{lsp:"(property) email: string",children:"email"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"a@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:","})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#6A9955"},children:"// this job stays in scheduled and won't be run because we haven't run sidetrack.start()"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(alias) const expect: ExpectStatic import expect",children:"expect"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"(("}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(method) Sidetrack<{ userOnboarding: { email: string; }; }>.getJob(jobId: string, options?: SidetrackGetJobOptions | undefined): Promise<SidetrackJobs>",children:"getJob"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.id: string",children:"id"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"))."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.status: SidetrackJobStatusEnum",children:"status"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"any",children:"toBe"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"scheduled"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})]}),(0,n.jsx)(e.div,{className:"line",children:"\xa0"}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#6A9955"},children:"// You decide when to run the job"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(method) SidetrackTest<{ userOnboarding: { email: string; }; }>.runJob(jobId: string, options?: SidetrackRunJobOptions | undefined): Promise<void>",children:"runJob"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.id: string",children:"id"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(alias) const expect: ExpectStatic import expect",children:"expect"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"(("}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"(method) Sidetrack<{ userOnboarding: { email: string; }; }>.getJob(jobId: string, options?: SidetrackGetJobOptions | undefined): Promise<SidetrackJobs>",children:"getJob"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.id: string",children:"id"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"))."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.status: SidetrackJobStatusEnum",children:"status"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:(0,n.jsx)(l,{lsp:"any",children:"toBe"})}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"completed"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki light-plus twoslash lsp",style:{backgroundColor:"#FFFFFF",color:"#000000"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"import"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(alias) class SidetrackTest<Queues extends SidetrackQueuesGenericType> import SidetrackTest",children:"SidetrackTest"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" } "}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"from"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"sidetrack"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:";"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"import"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(alias) const expect: ExpectStatic import expect",children:"expect"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"import it",children:"it"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" } "}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"from"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"vitest"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:";"})]}),(0,n.jsx)(e.div,{className:"line",children:"\xa0"}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"import it",children:"it"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"job runs"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"async"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" () "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#0070C1"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"new"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(alias) new SidetrackTest<{ userOnboarding: { email: string; }; }>(options: SidetrackOptions<{ userOnboarding: { email: string; }; }>): SidetrackTest<{ userOnboarding: { email: string; }; }> import SidetrackTest",children:"SidetrackTest"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"<{"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"    "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) userOnboarding: { email: string; }",children:"userOnboarding"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:": { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) email: string",children:"email"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:": "}),(0,n.jsx)(e.span,{style:{color:"#267F99"},children:"string"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" };"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  }>({"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"    "}),(0,n.jsxs)(e.span,{style:{color:"#001080"},children:[(0,n.jsx)(l,{lsp:"(property) SidetrackOptions<{ userOnboarding: { email: string; }; }>.databaseOptions?: { connectionString: string; } | undefined",children:"databaseOptions"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"      "}),(0,n.jsxs)(e.span,{style:{color:"#001080"},children:[(0,n.jsx)(l,{lsp:"(property) connectionString: string",children:"connectionString"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"var process: NodeJS.Process",children:"process"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) NodeJS.Process.env: NodeJS.ProcessEnv",children:"env"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"["}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"DATABASE_URL"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"]!,"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"    },"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"    "}),(0,n.jsxs)(e.span,{style:{color:"#001080"},children:[(0,n.jsx)(l,{lsp:"(property) SidetrackOptions<{ userOnboarding: { email: string; }; }>.queues: SidetrackQueues<{ userOnboarding: { email: string; }; }>",children:"queues"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"      "}),(0,n.jsxs)(e.span,{style:{color:"#001080"},children:[(0,n.jsx)(l,{lsp:"(property) userOnboarding: { handler: (job: SidetrackJob<{ email: string; }>) => Promise<unknown>; options?: { maxAttempts?: number | undefined; } | undefined; }",children:"userOnboarding"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"        "}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(property) handler: (job: SidetrackJob<{ email: string; }>) => Promise<unknown>",children:"handler"})}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:":"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"async"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" ("}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(parameter) job: SidetrackJob<{ email: string; }>",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:") "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"          "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"namespace console var console: Console",children:"console"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(method) Console.log(message?: any, ...optionalParams: any[]): void (+1 overload)",children:"log"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"ran job"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"        },"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"      },"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"    },"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  });"})}),(0,n.jsx)(e.div,{className:"line",children:"\xa0"}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#0070C1"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:'(method) Sidetrack<{ userOnboarding: { email: string; }; }>.insertJob<"userOnboarding">(queueName: "userOnboarding", payload: { email: string; }, options?: SidetrackInsertJobOptions | undefined): Promise<SidetrackJobs>',children:"insertJob"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"    "}),(0,n.jsxs)(e.span,{style:{color:"#001080"},children:[(0,n.jsx)(l,{lsp:"(property) email: string",children:"email"}),":"]}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"a@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:","})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  });"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#008000"},children:"// this job stays in scheduled and won't be run because we haven't run sidetrack.start()"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(alias) const expect: ExpectStatic import expect",children:"expect"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"(("}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(method) Sidetrack<{ userOnboarding: { email: string; }; }>.getJob(jobId: string, options?: SidetrackGetJobOptions | undefined): Promise<SidetrackJobs>",children:"getJob"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.id: string",children:"id"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"))."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.status: SidetrackJobStatusEnum",children:"status"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"any",children:"toBe"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"scheduled"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})]}),(0,n.jsx)(e.div,{className:"line",children:"\xa0"}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#008000"},children:"// You decide when to run the job"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(method) SidetrackTest<{ userOnboarding: { email: string; }; }>.runJob(jobId: string, options?: SidetrackRunJobOptions | undefined): Promise<void>",children:"runJob"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.id: string",children:"id"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(alias) const expect: ExpectStatic import expect",children:"expect"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"(("}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"const sidetrack: SidetrackTest<{ userOnboarding: { email: string; }; }>",children:"sidetrack"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"(method) Sidetrack<{ userOnboarding: { email: string; }; }>.getJob(jobId: string, options?: SidetrackGetJobOptions | undefined): Promise<SidetrackJobs>",children:"getJob"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"const job: SidetrackJobs",children:"job"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.id: string",children:"id"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"))."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:(0,n.jsx)(l,{lsp:"(property) SidetrackJobs.status: SidetrackJobStatusEnum",children:"status"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:(0,n.jsx)(l,{lsp:"any",children:"toBe"})}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"completed"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"});"})})]})})]}),"\n",(0,n.jsx)(e.h2,{id:"running-jobs-in-a-queue",children:"Running jobs in a queue"}),"\n",(0,n.jsxs)(e.p,{children:["While ",(0,n.jsx)(e.code,{children:"runJob"})," only allows you to run a single job, often you may want to run all the jobs on a queue."]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#6A9955"},children:"// You can run jobs on a single queue"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"runJobs"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"({ "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"queue:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" });"})]})]})})]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#008000"},children:"// You can run jobs on a single queue"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"runJobs"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"({ "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"queue:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" });"})]})]})})]}),"\n",(0,n.jsxs)(e.p,{children:["By default, ",(0,n.jsx)(e.code,{children:"runJobs"})," runs jobs that are scheduled in the past or present. If you want to include future jobs you may pass an option for ",(0,n.jsx)(e.code,{children:"{includeFutureJobs: true}"})]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#6A9955"},children:"// Will run all jobs on this queue, including ones with scheduledAt in the future"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"runJobs"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"queue:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" },"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"includeFutureJobs:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"true"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" },"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})})]})})]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#008000"},children:"// Will run all jobs on this queue, including ones with scheduledAt in the future"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"runJobs"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"queue:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" },"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"includeFutureJobs:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"true"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" },"})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})})]})})]}),"\n",(0,n.jsx)(e.h2,{id:"listing-jobs",children:"Listing jobs"}),"\n",(0,n.jsxs)(e.p,{children:["You may want to assert that certain jobs exist on a queue(s).\n",(0,n.jsx)(e.code,{children:"listJob"})," accepts a single queue or list of queues, and returns a list of jobs."]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"a@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"b@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),(0,n.jsx)(e.div,{className:"line"}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#6A9955"},children:"// You can run jobs on a single queue"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#4FC1FF"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"listJobs"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"({ "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"queue:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"expect"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"length"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"toBe"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#B5CEA8"},children:"2"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})]})]})})]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"a@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" });"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"b@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" });"})]}),(0,n.jsx)(e.div,{className:"line"}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#008000"},children:"// You can run jobs on a single queue"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#0070C1"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"listJobs"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"({ "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"queue:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" });"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"expect"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"length"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"toBe"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#098658"},children:"2"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})]})]})})]}),"\n",(0,n.jsx)(e.h2,{id:"listing-job-statuses",children:"Listing job statuses"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"listJobStatuses"})," provides a convenient way to know the breakdown of all the jobs and their statuses."]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#4FC1FF"},children:"job1"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"a@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:","})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"});"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", { "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"b@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"runJob"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"job1"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"id"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})]}),(0,n.jsx)(e.div,{className:"line"}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#6A9955"},children:"// since we only ran job 1"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#6A9955"},children:"// we should expect 1 job to be completed, 1 job to be in scheduled"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#569CD6"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#4FC1FF"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#C586C0"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"listJobsStatuses"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#CE9178"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:");"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"expect"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#DCDCAA"},children:"toBeObject"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:"({ "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"scheduled:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#B5CEA8"},children:"1"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:", "}),(0,n.jsx)(e.span,{style:{color:"#9CDCFE"},children:"completed:"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#B5CEA8"},children:"1"}),(0,n.jsx)(e.span,{style:{color:"#D4D4D4"},children:" });"})]})]})})]}),"\n",(0,n.jsxs)(e.pre,{className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"},hasCopyCode:!0,children:[(0,n.jsx)(e.div,{className:"language-id",children:"ts"}),(0,n.jsx)(e.div,{className:"code-container",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#0070C1"},children:"job1"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", {"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#000000"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"a@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:","})]}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#000000"},children:"});"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"insert"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", { "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"email:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"b@example.com"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" });"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"runJob"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"job1"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"id"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})]}),(0,n.jsx)(e.div,{className:"line"}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#008000"},children:"// since we only ran job 1"})}),(0,n.jsx)(e.div,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"#008000"},children:"// we should expect 1 job to be completed, 1 job to be in scheduled"})}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#0000FF"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#0070C1"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" = "}),(0,n.jsx)(e.span,{style:{color:"#AF00DB"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"sidetrack"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"listJobsStatuses"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#A31515"},children:'"userOnboarding"'}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:");"})]}),(0,n.jsxs)(e.div,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"expect"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"jobs"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:")."}),(0,n.jsx)(e.span,{style:{color:"#795E26"},children:"toBeObject"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:"({ "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"scheduled:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#098658"},children:"1"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:", "}),(0,n.jsx)(e.span,{style:{color:"#001080"},children:"completed:"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#098658"},children:"1"}),(0,n.jsx)(e.span,{style:{color:"#000000"},children:" });"})]})]})})]})]})}let d={MDXContent:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.a)(),s.components);return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(t,{...s})}):t(s)},pageOpts:{filePath:"pages/guides/testing-sidetrack.mdx",route:"/guides/testing-sidetrack",pageMap:[{kind:"Meta",data:{index:"Introduction","why-sidetrack":"Why Sidetrack?",quickstart:"Quickstart","-Sections":{title:"Sections",type:"separator"},guides:{title:"Guides"},examples:{title:"Examples"},blog:{title:"Blog",type:"page",theme:{typesetting:"article"}},contact:{title:"Reference Docs ↗",href:"https://sidetracklabs.github.io/sidetrack/",newWindow:!0}}},{kind:"Folder",name:"blog",route:"/blog",children:[{kind:"Meta",data:{"*":{display:"hidden",theme:{toc:!1,sidebar:!1,pagination:!1,typesetting:"article"}},"announcing-sidetrack":"Announcing Sidetrack"}},{kind:"MdxPage",name:"announcing-sidetrack",route:"/blog/announcing-sidetrack",frontMatter:{title:"Announcing Sidetrack",date:"August 8, 2023",description:"A new way to manage background jobs in your TypeScript backend."}}]},{kind:"MdxPage",name:"blog",route:"/blog",frontMatter:{description:"The latest updates and releases from Sidetrack.",type:"posts"}},{kind:"Folder",name:"examples",route:"/examples",children:[{kind:"MdxPage",name:"transactional-job-insertion",route:"/examples/transactional-job-insertion"},{kind:"Meta",data:{"transactional-job-insertion":"Transactional Job Insertion"}}]},{kind:"Folder",name:"guides",route:"/guides",children:[{kind:"Meta",data:{"configuring-queues":"Configuring Queues","working-with-types":"Working With Types","running-migrations":"Running Migrations","custom-db-client":"Custom Database Clients","testing-sidetrack":"Testing Sidetrack","errors-and-logging":"Errors and Logging","using-effect":"Using Sidetrack With Effect"}},{kind:"MdxPage",name:"configuring-queues",route:"/guides/configuring-queues"},{kind:"MdxPage",name:"custom-db-client",route:"/guides/custom-db-client"},{kind:"MdxPage",name:"errors-and-logging",route:"/guides/errors-and-logging"},{kind:"MdxPage",name:"running-migrations",route:"/guides/running-migrations"},{kind:"MdxPage",name:"testing-sidetrack",route:"/guides/testing-sidetrack"},{kind:"MdxPage",name:"using-effect",route:"/guides/using-effect"},{kind:"MdxPage",name:"working-with-types",route:"/guides/working-with-types"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"quickstart",route:"/quickstart"},{kind:"MdxPage",name:"why-sidetrack",route:"/why-sidetrack"}],flexsearch:{codeblocks:!0},title:"Testing Sidetrack",headings:a},pageNextRoute:"/guides/testing-sidetrack",nextraLayout:c.ZP,themeConfig:o.Z};e.default=(0,r.j)(d)},9170:function(s,e,l){"use strict";l.d(e,{Z:function(){return i}});var n=l(1527);l(959);var r=l(7319),c=l.n(r),o=l(7412),i={logo:(0,n.jsx)(c(),{src:{src:"/_next/static/media/logo.d8a3e4b2.png",height:2048,width:2048,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAM1BMVEVMaXH/YC3/Wyj+bjT/PBT/NhD/czj/ej7/cTb/g0T/ZzD/bDT/YSz/dTn/XSf/jUn/l1CTCPoDAAAAD3RSTlMARSN3DBaQ13DtWXpRrDRjdz3ZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVR4nBXKSQ7AIAzAQFPIBm2T/78W5TayDMgYC+CxTGt5fdu77AyVBq9V/P0c0VJgVkT2tKaZwwUvQQFjOFE86AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},alt:"Logo",width:25,height:25}),project:{link:"https://github.com/sidetracklabs"},docsRepositoryBase:"https://github.com/sidetracklabs/website",useNextSeoProps(){let{asPath:s}=(0,o.useRouter)();if("/"!==s)return{titleTemplate:"%s – Sidetrack"}},head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("meta",{property:"og:title",content:"Sidetrack"}),(0,n.jsx)("meta",{property:"og:description",content:"An open source, PostgreSQL-backed, typescript-first background job library."}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"})]}),footer:{text:"Sidetrack Labs"}}}},function(s){s.O(0,[843,888,774,179],function(){return s(s.s=4823)}),_N_E=s.O()}]);